/* (c) 2012 Kevin Newman
license MIT
www.unfocus.com */
(function(){"use strict";function e(e,t){this.next=null,this.prev=null,this.listener=e,this.target=t}function t(t,n){this.first=new e,this.last=this.first,this.target=t,this.eachReturn=n,this.dispatching=!1}var n=t._cutNode=function(e){e.prev.next=e.next,e.next&&(e.next.prev=e.prev),this.last===e&&(this.last=e.prev)};t.prototype={add:function(t,n){if(this.has(t))return;this.last.next=new e(t,n),this.last.next.prev=this.last,this.last=this.last.next},addToTop:function(t,n){this.has(t)&&(this.remove(t),this.addToTop(t));var r=new e(t,n);r.next=this.first.next,r.prev=this.first,this.first.next.prev=r,this.first.next=r},has:function(e){if(this.first===this.last)return!1;var t=this.first;do if(t.next&&t.next.listener===e)return!0;while(t=t.next);return!1},getLength:function(){var e=0,t=this.first;while(t=t.next)++e;return e},once:function(e,t){function r(){n.remove(r),e.apply(this,arguments)}var n=this;this.add(r,t)},remove:function(e){if(this.first===this.last)return;var t=this.first;while(t=t.next)if(t.listener===e){n.call(this,t);break}this.first===this.last&&(this.first.next=null)},removeAll:function(){this.first.next=null,this.first.prev=null,this.last=this.first},trigger:function(){if(this.first===this.last)return;this.dispatching=!0;var e=Array.prototype.slice.call(arguments),t=this.first;while((t=t.next)&&this.dispatching){var n=t.listener.apply(t.target||this.target,e);this.eachReturn&&this.eachReturn(n,e)}this.dispatching=!1},stopDispatch:function(){this.dispatching=!1}},window.SignalLite=t,window.SlotLite=e})()